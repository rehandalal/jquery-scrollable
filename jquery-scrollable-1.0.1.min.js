//
// jQuery Scrollable Plugin 
// http://github.com/rehandalal/jquery-scrollable
// Version: 1.0.1
// 
// Create iOS / Mac OS X Lion style fading scrollbars for scrollable elements.
// 
// Copyright (c) 2012, Rehan Dalal
// Licensed under the Unlicense (http://unlicense.org/)
//
(function(a){"use strict";var b={create:function(b){return this.each(function(){function m(){e.show_track&&j.fadeOut(500),k.fadeOut(500)}function n(a){var b,d,h;return b=a.originalEvent,d=b.wheelDelta?-b.wheelDelta:b.detail,d/=Math.abs(d),h=c.scrollTop()+d*e.mousewheel_step,c.scrollTop(h),k.css({top:e.margin+c.scrollTop()/(e.scrollableHeight-f)*(g-k.height())+"px"}),!1}function o(){e.show_track&&j.fadeIn(150),k.fadeIn(150)}var c,d,e,f,g,h,i,j,k,l;d={align:"right",fade:!0,margin:0,mousewheel:!0,mousewheel_step:32,show_track:!1,thumb_class:"scrollable_thumb",track_class:"scrollable_track",track_width:8,wrapper_class:"scrollable_wrapper"},c=a(this),e=a.extend(d,b),c.scrollable("destroy"),c.data("scrollable",e),f=c.height(),g=f-2*e.margin,h=a("<div></div>").addClass(e.wrapper_class).css({height:f,overflow:"hidden",position:"relative",width:c.outerWidth()}),c.wrap(h),i=c.parent(),j=a("<div></div>").addClass(e.track_class).css({bottom:e.margin+"px",display:!e.fade&&e.show_track?"block":"none",left:e.align==="left"?e.margin+"px":"auto",position:"absolute",right:e.align==="right"?e.margin+"px":"auto",top:e.margin+"px",width:e.track_width+"px",zIndex:1e3}),k=a("<div></div>").addClass(e.thumb_class).css({display:e.fade?"none":"block",left:e.align==="left"?e.margin+"px":"auto",position:"absolute",right:e.align==="right"?e.margin+"px":"auto",top:e.margin+"px",width:e.track_width+"px",zIndex:2e3}),e.track=j,e.thumb=k,c.scrollable("refresh"),l=j.clone().css({display:"block",visibility:"hidden",zIndex:0}),i.append(l).append(j).append(k),k.draggable({axis:"y",containment:l,start:function(){a(this).data("dragging",!0)},stop:function(){a(this).data("dragging",!1),i.data("hovering")!==!0&&e.fade===!0&&m()},drag:function(){var b=(a(this).position().top-e.margin)/(g-k.height())*(e.scrollableHeight-f);c.scrollTop(b)}}),e.fade===!0&&i.hover(function(){i.data("hovering",!0),o()},function(){i.data("hovering",!1),k.data("dragging")!==!0&&m()}),e.mousewheel===!0&&(i.on("DOMMouseScroll",n),i.on("mousewheel",n))})},destroy:function(){return this.each(function(){var b,c;b=a(this),c=b.data("scrollable"),c!==undefined&&(b.css({height:"",position:"",overflow:""}),b.unwrap(),c.thumb.remove(),c.track.remove(),a(window).unbind(".scrollable"),b.removeData("scrollable"))})},refresh:function(){return this.each(function(){var b,c,d,e,f;b=a(this),c=b.data("scrollable"),c!==undefined&&(d=b.parent().height(),e=b.scrollTop(),b.css({height:"auto",overflow:"visible"}),c.scrollableHeight=b.height(),b.css({height:d,overflow:"hidden"}),b.scrollTop(e),f=d*d/c.scrollableHeight,f<16&&(f=16),c.thumb.css({height:f+"px"}),c.thumb.css({top:c.margin+b.scrollTop()/(c.scrollableHeight-d)*(c.track.height()-c.thumb.height())+"px"}))})}};a.fn.scrollable=function(c){if(b[c])return b[c].apply(this,Array.prototype.slice.call(arguments,1));if(typeof c=="object"||!c)return b.create.apply(this,arguments);a.error("Method "+c+" does not exist on jQuery.scrollable")}})(jQuery)