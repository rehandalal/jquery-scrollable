//
// jQuery Scrollable Plugin 
// http://github.com/rehandalal/jquery-scrollable
// Version: 1.0.0
// 
// Create iOS / Mac OS X Lion style fading scrollbars for scrollable elements.
// 
// Copyright (c) 2012, Rehan Dalal
// Licensed under the Unlicense (http://unlicense.org/)
//
(function(a){"use strict";var b={create:function(b){var c,d;return c={align:"right",fade:!0,margin:0,mousewheel:!0,mousewheel_step:32,show_track:!1,thumb_class:"scrollable_thumb",track_class:"scrollable_track",track_width:8,wrapper_class:"scrollable_wrapper"},d=a.extend(c,b),this.each(function(){function k(){d.show_track&&h.fadeOut(500),i.fadeOut(500)}function l(a){var f,g,h;return f=a.originalEvent,g=f.wheelDelta?-f.wheelDelta:f.detail,g/=Math.abs(g),h=b.scrollTop()+g*d.mousewheel_step,b.scrollTop(h),i.css({top:d.margin+b.scrollTop()/(d.scrollableHeight-c)*(e-i.height())+"px"}),!1}function m(){d.show_track&&h.fadeIn(150),i.fadeIn(150)}var b,c,e,f,g,h,i,j;b=a(this),b.scrollable("destroy"),b.data("scrollable",d),c=b.height(),e=c-2*d.margin,f=a("<div></div>").addClass(d.wrapper_class).css({height:c,overflow:"hidden",position:"relative",width:b.outerWidth()}),b.wrap(f),g=b.parent(),h=a("<div></div>").addClass(d.track_class).css({bottom:d.margin+"px",display:!d.fade&&d.show_track?"block":"none",left:d.align==="left"?d.margin+"px":"auto",position:"absolute",right:d.align==="right"?d.margin+"px":"auto",top:d.margin+"px",width:d.track_width+"px",zIndex:1e3}),i=a("<div></div>").addClass(d.thumb_class).css({display:d.fade?"none":"block",left:d.align==="left"?d.margin+"px":"auto",position:"absolute",right:d.align==="right"?d.margin+"px":"auto",top:d.margin+"px",width:d.track_width+"px",zIndex:2e3}),d.track=h,d.thumb=i,b.scrollable("refresh"),j=h.clone().css({display:"block",visibility:"hidden",zIndex:0}),g.append(j).append(h).append(i),i.draggable({axis:"y",containment:j,start:function(){a(this).data("dragging",!0)},stop:function(){a(this).data("dragging",!1),g.data("hovering")!==!0&&d.fade===!0&&k()},drag:function(){var f=(a(this).position().top-d.margin)/(e-i.height())*(d.scrollableHeight-c);b.scrollTop(f)}}),d.fade===!0&&g.hover(function(){g.data("hovering",!0),m()},function(){g.data("hovering",!1),i.data("dragging")!==!0&&k()}),d.mousewheel===!0&&(g.on("DOMMouseScroll",l),g.on("mousewheel",l))})},destroy:function(){return this.each(function(){var b=a(this);b.data("scrollable")!==undefined&&(a(window).unbind(".scrollable"),b.removeData("scrollable"),b.css({height:"",position:"",overflow:""}),b.unwrap())})},refresh:function(){return this.each(function(){var b,c,d,e,f;b=a(this),c=b.data("scrollable"),c!==undefined&&(d=b.parent().height(),e=b.scrollTop(),b.css({height:"auto",overflow:"visible"}),c.scrollableHeight=b.height(),b.css({height:d,overflow:"hidden"}),b.scrollTop(e),f=d*d/c.scrollableHeight,f<16&&(f=16),c.thumb.css({height:f+"px"}),c.thumb.css({top:c.margin+b.scrollTop()/(c.scrollableHeight-d)*(c.track.height()-c.thumb.height())+"px"}))})}};a.fn.scrollable=function(c){if(b[c])return b[c].apply(this,Array.prototype.slice.call(arguments,1));if(typeof c=="object"||!c)return b.create.apply(this,arguments);a.error("Method "+c+" does not exist on jQuery.scrollable")}})(jQuery)