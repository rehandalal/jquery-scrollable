//
// jQuery Scrollable Plugin 
// http://github.com/rehandalal/jquery-scrollable
// Version: 1.0.0
// 
// Create iOS / Mac OS X Lion style fading scrollbars for scrollable elements.
// 
// Copyright (c) 2012, Rehan Dalal
// Licensed under the Unlicense (http://unlicense.org/)
//
(function(a){var b={create:function(b){var c={align:"right",margin:0,railclass:"scrollable_rail",railwidth:8,riderclass:"scrollable_rider",showalways:!1,showrail:!1,wheelstep:32,wrapperclass:"scrollable_wrapper"},d=a.extend(c,b);return this.each(function(){function k(){d.showrail&&h.fadeOut(500),i.fadeOut(500)}function l(a){var f=a.originalEvent,g=f.wheelDelta?f.wheelDelta:f.detail;g/=Math.abs(g);var h=b.scrollTop()+g*d.wheelstep;b.scrollTop(h),i.css({top:d.margin+b.scrollTop()/(d.scrollableHeight-c)*(e-i.height())+"px"})}function m(){d.showrail&&h.fadeIn(150),i.fadeIn(150)}var b=a(this);b.data("scrollable")&&(b.scrollable("destroy"),b.css({height:"",position:"",overflow:""}),b.unwrap()),b.data("scrollable",d);var c=b.height(),e=c-2*d.margin,f=a("<div></div>").addClass(d.wrapperclass).css({height:c,overflow:"hidden",position:"relative",width:b.outerWidth()});b.wrap(f);var g=b.parent(),h=a("<div></div>").addClass(d.railclass).css({bottom:d.margin+"px",display:d.showalways&&d.showrail?"block":"none",left:d.align=="left"?d.margin+"px":"auto",position:"absolute",right:d.align=="right"?d.margin+"px":"auto",top:d.margin+"px",width:d.railwidth+"px",zIndex:1e3}),i=a("<div></div>").addClass(d.riderclass).css({display:d.showalways?"block":"none",left:d.align=="left"?d.margin+"px":"auto",position:"absolute",right:d.align=="right"?d.margin+"px":"auto",top:d.margin+"px",width:d.railwidth+"px",zIndex:2e3});d.rail=h,d.rider=i,b.scrollable("refresh");var j=h.clone().removeClass(d.railclass).css({display:"block",zIndex:0});g.append(j).append(h).append(i),i.draggable({axis:"y",containment:j,start:function(){a(this).data("dragging",!0)},stop:function(){a(this).data("dragging",!1),g.data("hovering")!==!0&&k()},drag:function(){var f=(a(this).position().top-d.margin)/(e-i.height())*(d.scrollableHeight-c);b.scrollTop(f)}}),d.showalways!==!0&&g.hover(function(){g.data("hovering",!0),m()},function(){g.data("hovering",!1),i.data("dragging")!==!0&&k()}),g.on("DOMMouseScroll",l),g.on("mousewheel",l)})},destroy:function(){return this.each(function(){var b=a(this);a(window).unbind(".scrollable"),b.removeData("scrollable")})},refresh:function(){return this.each(function(){var b=a(this),c=b.data("scrollable"),d=b.parent().height(),e=b.scrollTop();b.css({height:"auto",overflow:"visible"}),c.scrollableHeight=b.height(),b.css({height:d,overflow:"hidden"}),b.scrollTop(e);var f=d*d/c.scrollableHeight;f<16&&(f=16),c.rider.css({height:f+"px"}),c.rider.css({top:c.margin+b.scrollTop()/(c.scrollableHeight-d)*(c.rail.height()-c.rider.height())+"px"})})}};a.fn.scrollable=function(c){if(b[c])return b[c].apply(this,Array.prototype.slice.call(arguments,1));if(typeof c=="object"||!c)return b.create.apply(this,arguments);a.error("Method "+c+" does not exist on jQuery.scrollable")}})(jQuery)